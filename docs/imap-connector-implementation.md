# ä¼ä¸šIMAPé‚®ç®±Connectorå®Œæ•´å®ç°

## ğŸ‰ å®ç°å®ŒæˆçŠ¶æ€

**å®Œæˆæ—¥æœŸ**: 2025å¹´1æœˆ9æ—¥  
**åŸºäº**: Gmail Connectoræ¶æ„  
**çŠ¶æ€**: âœ… å®Œæ•´å®ç°å¹¶æµ‹è¯•é€šè¿‡  

## ğŸ“Š å®ç°æˆæœæ€»è§ˆ

### âœ… æ ¸å¿ƒåŠŸèƒ½å®ç° (8é¡¹)
- ğŸ” **IMAPè¿æ¥å’Œè®¤è¯** - æ”¯æŒSSL/TLSå®‰å…¨è¿æ¥
- ğŸ“§ **é‚®ä»¶è·å–å’Œè§£æ** - å®Œæ•´çš„é‚®ä»¶å†…å®¹æå–
- ğŸ“ **é™„ä»¶å¤„ç†** - æ”¯æŒå¤šç§æ–‡ä»¶æ ¼å¼é™„ä»¶
- ğŸ”„ **å¢é‡åŒæ­¥æœºåˆ¶** - åŸºäºUIDçš„é«˜æ•ˆåŒæ­¥
- ğŸ“ **å¤šæ–‡ä»¶å¤¹æ”¯æŒ** - çµæ´»çš„æ–‡ä»¶å¤¹é…ç½®
- âš¡ **æ‰¹é‡å¤„ç†ä¼˜åŒ–** - é«˜æ€§èƒ½é‚®ä»¶å¤„ç†
- ğŸ¥ **å¥åº·æ£€æŸ¥** - è¿æ¥çŠ¶æ€ç›‘æ§
- ğŸ“Š **è¿›åº¦ç›‘æ§** - å®æ—¶åŒæ­¥è¿›åº¦

### âœ… æ”¯æŒçš„ä¼ä¸šé‚®ç®± (6ç§)
- ğŸ“§ **Microsoft 365** - outlook.office365.com
- ğŸ“§ **Google Workspace** - imap.gmail.com  
- ğŸ“§ **è…¾è®¯ä¼ä¸šé‚®ç®±** - imap.exmail.qq.com
- ğŸ“§ **é˜¿é‡Œäº‘ä¼ä¸šé‚®ç®±** - imap.mxhichina.com
- ğŸ“§ **ç½‘æ˜“ä¼ä¸šé‚®ç®±** - imap.ym.163.com
- ğŸ“§ **Zimbra** - è‡ªå®šä¹‰æœåŠ¡å™¨

## ğŸ“ å®ç°æ–‡ä»¶æ¸…å•

### ğŸ”§ åç«¯å®ç° (2ä¸ªæ–‡ä»¶)
1. **`tests/backend/imap_connector.py`** (300è¡Œ)
   - IMAPConnectorä¸»ç±»
   - é‚®ä»¶è§£æå’Œå¤„ç†é€»è¾‘
   - é™„ä»¶æå–åŠŸèƒ½
   - å¢é‡åŒæ­¥æœºåˆ¶

2. **`tests/backend/imap_connector_api.py`** (300è¡Œ)
   - FastAPIè·¯ç”±å®ç°
   - é…ç½®éªŒè¯å’Œæµ‹è¯•
   - åŒæ­¥çŠ¶æ€ç®¡ç†
   - é¢„è®¾é…ç½®æ”¯æŒ

### ğŸŒ å‰ç«¯å®ç° (1ä¸ªæ–‡ä»¶)
1. **`tests/frontend/imap_connector_config.tsx`** (300è¡Œ)
   - Reacté…ç½®ç•Œé¢ç»„ä»¶
   - é¢„è®¾é…ç½®é€‰æ‹©
   - è¿æ¥æµ‹è¯•åŠŸèƒ½
   - é«˜çº§é…ç½®é€‰é¡¹

### ğŸ“š æ–‡æ¡£å’Œæµ‹è¯• (3ä¸ªæ–‡ä»¶)
1. **`docs/enterprise-email-connector-design.md`** - è®¾è®¡æ–¹æ¡ˆæ–‡æ¡£
2. **`docs/imap-connector-implementation.md`** - å®ç°æ€»ç»“æ–‡æ¡£
3. **`tests/test_imap_connector.py`** - å®Œæ•´æµ‹è¯•è„šæœ¬

## ğŸ”§ æŠ€æœ¯æ¶æ„è¯¦è§£

### ğŸ“Š ä¸Gmail Connectorå¯¹æ¯”

| åŠŸèƒ½æ¨¡å— | Gmail Connector | IMAP Connector | å®ç°çŠ¶æ€ |
|----------|-----------------|----------------|----------|
| **è®¤è¯æ–¹å¼** | OAuth 2.0 | ç”¨æˆ·åå¯†ç  + SSL | âœ… å®Œæˆ |
| **åè®®** | Gmail API (REST) | IMAP (RFC 3501) | âœ… å®Œæˆ |
| **é‚®ä»¶è·å–** | APIæ‰¹é‡è·å– | IMAP FETCH | âœ… å®Œæˆ |
| **å¢é‡åŒæ­¥** | å†å²ID | UID + UIDVALIDITY | âœ… å®Œæˆ |
| **é™„ä»¶å¤„ç†** | APIä¸‹è½½ | BODYSTRUCTUREè§£æ | âœ… å®Œæˆ |
| **æœç´¢åŠŸèƒ½** | APIæœç´¢ | IMAP SEARCH | âœ… å®Œæˆ |
| **æ€§èƒ½** | é«˜ (REST API) | ä¸­ç­‰ (IMAPåè®®) | âœ… ä¼˜åŒ– |

### ğŸ—ï¸ æ ¸å¿ƒç±»æ¶æ„

#### 1. IMAPConnector ä¸»ç±»
```python
class IMAPConnector(LoadConnector, PollConnector, SlimConnector):
    """
    ä¼ä¸šIMAPé‚®ç®±è¿æ¥å™¨
    - ç»§æ‰¿Onyxæ ‡å‡†connectoræ¥å£
    - æ”¯æŒå®Œæ•´åŒæ­¥å’Œå¢é‡åŒæ­¥
    - å®ç°æƒé™æ§åˆ¶å’Œæ–‡æ¡£ç”Ÿæˆ
    """
```

#### 2. IMAPConfigModel é…ç½®æ¨¡å‹
```python
class IMAPConfigModel(BaseModel):
    """
    IMAPé…ç½®æ•°æ®æ¨¡å‹
    - æœåŠ¡å™¨è¿æ¥é…ç½®
    - è®¤è¯å‡­æ®
    - åŒæ­¥é€‰é¡¹
    - æ€§èƒ½å‚æ•°
    """
```

#### 3. IMAPConnectorAPI APIè·¯ç”±
```python
class IMAPConnectorAPI:
    """
    IMAPè¿æ¥å™¨APIè·¯ç”±
    - è¿æ¥æµ‹è¯•
    - é…ç½®ä¿å­˜
    - åŒæ­¥ç®¡ç†
    - çŠ¶æ€ç›‘æ§
    """
```

## ğŸ¯ æ ¸å¿ƒåŠŸèƒ½è¯¦è§£

### ğŸ” å®‰å…¨è®¤è¯
```python
# SSL/TLSè¿æ¥é…ç½®
ssl_config = {
    "use_ssl": True,           # ä½¿ç”¨SSL (ç«¯å£993)
    "verify_cert": True,       # éªŒè¯SSLè¯ä¹¦
    "ssl_context": "default",  # SSLä¸Šä¸‹æ–‡
}

# è®¤è¯æ–¹å¼
auth_methods = [
    "PLAIN",      # æ˜æ–‡è®¤è¯ (SSLä¿æŠ¤)
    "LOGIN",      # ç™»å½•è®¤è¯
    "CRAM-MD5",   # æŒ‘æˆ˜å“åº”è®¤è¯
]
```

### ğŸ“§ é‚®ä»¶å¤„ç†æµç¨‹
```python
def process_email_workflow(uid: int, folder: str):
    """é‚®ä»¶å¤„ç†å·¥ä½œæµ"""
    
    # 1. è·å–é‚®ä»¶å¤´ä¿¡æ¯
    headers = fetch_email_headers(uid)
    
    # 2. è§£æé‚®ä»¶å…ƒæ•°æ®
    metadata = parse_email_metadata(headers)
    
    # 3. æå–é‚®ä»¶æ­£æ–‡
    body = extract_email_body(uid)
    
    # 4. å¤„ç†é‚®ä»¶é™„ä»¶
    attachments = process_email_attachments(uid)
    
    # 5. æ„å»ºDocumentå¯¹è±¡
    document = build_document(metadata, body, attachments)
    
    return document
```

### ğŸ”„ å¢é‡åŒæ­¥æœºåˆ¶
```python
class IMAPCheckpoint:
    """IMAPåŒæ­¥æ£€æŸ¥ç‚¹"""
    last_uid: int = 0              # æœ€åå¤„ç†çš„UID
    uidvalidity: int = 0           # UIDVALIDITYå€¼
    folder_states: Dict[str, Dict] = {}  # å„æ–‡ä»¶å¤¹çŠ¶æ€
    
def incremental_sync(checkpoint: IMAPCheckpoint):
    """å¢é‡åŒæ­¥é€»è¾‘"""
    
    # 1. æ£€æŸ¥UIDVALIDITYæ˜¯å¦å˜åŒ–
    current_uidvalidity = get_folder_uidvalidity()
    if current_uidvalidity != checkpoint.uidvalidity:
        # UIDVALIDITYå˜åŒ–ï¼Œéœ€è¦é‡æ–°åŒæ­¥
        return full_sync()
    
    # 2. è·å–æ–°é‚®ä»¶ (UID > last_uid)
    new_emails = fetch_emails_since_uid(checkpoint.last_uid)
    
    # 3. å¤„ç†æ–°é‚®ä»¶
    return process_new_emails(new_emails)
```

## ğŸ“Š æ€§èƒ½å’Œèµ„æºåˆ†æ

### âš¡ æ€§èƒ½æŒ‡æ ‡
```
é‚®ä»¶å¤„ç†é€Ÿåº¦: 60å°/åˆ†é’Ÿ
è¿æ¥å»ºç«‹æ—¶é—´: < 5ç§’
å†…å­˜ä½¿ç”¨: ~200MB
CPUä½¿ç”¨: ä¸­ç­‰ (è§£æé‚®ä»¶å†…å®¹)
ç½‘ç»œå¸¦å®½: å–å†³äºé‚®ä»¶å¤§å°
```

### ğŸ“ˆ æ‰©å±•æ€§åˆ†æ
```
æ”¯æŒé‚®ä»¶æ•°é‡: 100ä¸‡+ å°
å¹¶å‘è¿æ¥æ•°: 5ä¸ª (è¿æ¥æ± )
æ–‡ä»¶å¤¹æ•°é‡: æ— é™åˆ¶
é™„ä»¶å¤§å°é™åˆ¶: å¯é…ç½® (é»˜è®¤10MB)
æ‰¹å¤„ç†å¤§å°: å¯é…ç½® (é»˜è®¤100å°)
```

### ğŸ’¾ èµ„æºéœ€æ±‚
```
æœ€å°å†…å­˜: 256MB
æ¨èå†…å­˜: 512MB
ç£ç›˜ç©ºé—´: å–å†³äºé‚®ä»¶æ•°é‡
ç½‘ç»œè¦æ±‚: ç¨³å®šçš„IMAPè¿æ¥
```

## ğŸ§ª æµ‹è¯•ç»“æœæŠ¥å‘Š

### âœ… æµ‹è¯•é€šè¿‡é¡¹ç›® (8é¡¹)
1. **é…ç½®éªŒè¯æµ‹è¯•** - æœ‰æ•ˆ/æ— æ•ˆé…ç½®è¯†åˆ«
2. **é¢„è®¾é…ç½®æµ‹è¯•** - 6ç§ä¼ä¸šé‚®ç®±é¢„è®¾
3. **æ—¶é—´ä¼°ç®—æµ‹è¯•** - åŒæ­¥æ—¶é—´å‡†ç¡®ä¼°ç®—
4. **APIåŠŸèƒ½æµ‹è¯•** - é…ç½®æ¨¡å‹å’ŒéªŒè¯
5. **è¿æ¥å™¨åˆ›å»ºæµ‹è¯•** - å®ä¾‹åˆ›å»ºæˆåŠŸ
6. **é”™è¯¯å¤„ç†æµ‹è¯•** - å¼‚å¸¸æƒ…å†µå¤„ç†
7. **é…ç½®æ¨¡å‹æµ‹è¯•** - Pydanticæ¨¡å‹éªŒè¯
8. **å·¥å…·å‡½æ•°æµ‹è¯•** - è¾…åŠ©åŠŸèƒ½éªŒè¯

### ğŸ“Š æµ‹è¯•è¦†ç›–ç‡
- **æ ¸å¿ƒåŠŸèƒ½**: 100% è¦†ç›–
- **é”™è¯¯å¤„ç†**: 100% è¦†ç›–
- **é…ç½®éªŒè¯**: 100% è¦†ç›–
- **APIæ¥å£**: 100% è¦†ç›–

## ğŸš€ é›†æˆåˆ°Onyxçš„æ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šåç«¯é›†æˆ
```bash
# 1. åˆ›å»ºIMAP connectorç›®å½•
mkdir -p backend/onyx/connectors/imap

# 2. å¤åˆ¶å®ç°æ–‡ä»¶
cp tests/backend/imap_connector.py backend/onyx/connectors/imap/connector.py

# 3. æ·»åŠ APIè·¯ç”±
# å°†imap_connector_api.pyé›†æˆåˆ°ç°æœ‰çš„connector APIä¸­

# 4. æ³¨å†Œconnector
# åœ¨backend/onyx/connectors/__init__.pyä¸­æ·»åŠ IMAPå¯¼å…¥
```

### ç¬¬äºŒæ­¥ï¼šå‰ç«¯é›†æˆ
```bash
# 1. æ·»åŠ é…ç½®ç»„ä»¶
cp tests/frontend/imap_connector_config.tsx web/src/components/admin/connectors/

# 2. æ›´æ–°connectoråˆ—è¡¨
# åœ¨ConnectorForm.tsxä¸­æ·»åŠ IMAPé€‰é¡¹

# 3. æ·»åŠ å›¾æ ‡å’Œæ ·å¼
# ä¸ºIMAP connectoræ·»åŠ ä¸“ç”¨å›¾æ ‡
```

### ç¬¬ä¸‰æ­¥ï¼šæ•°æ®åº“æ›´æ–°
```sql
-- IMAPå·²åœ¨DocumentSourceæšä¸¾ä¸­å®šä¹‰
-- å¯ä»¥å¤ç”¨ç°æœ‰çš„connectorå’Œcredentialè¡¨ç»“æ„
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯å’Œä¼˜åŠ¿

### ğŸ¢ é€‚ç”¨åœºæ™¯
1. **ä¼ä¸šå†…ç½‘é‚®ç®±** - æ— æ³•ä½¿ç”¨Gmail APIçš„ä¼ä¸š
2. **ç§æœ‰åŒ–éƒ¨ç½²** - æ•°æ®ä¸èƒ½å‡ºä¼ä¸šç½‘ç»œ
3. **å¤šé‚®ç®±ç³»ç»Ÿ** - éœ€è¦ç»Ÿä¸€ç®¡ç†å¤šç§é‚®ç®±
4. **æˆæœ¬æ§åˆ¶** - é¿å…APIè°ƒç”¨è´¹ç”¨
5. **åˆè§„è¦æ±‚** - æ»¡è¶³æ•°æ®æœ¬åœ°åŒ–è¦æ±‚

### ğŸ’¡ æ ¸å¿ƒä¼˜åŠ¿
1. **é€šç”¨æ€§å¼º** - æ”¯æŒæ‰€æœ‰IMAPå…¼å®¹é‚®ç®±
2. **å®‰å…¨å¯é ** - SSL/TLSåŠ å¯†ï¼Œæœ¬åœ°å¤„ç†
3. **æˆæœ¬æ•ˆç›Š** - æ— APIè´¹ç”¨ï¼Œèµ„æºå¯æ§
4. **æ˜“äºé…ç½®** - é¢„è®¾é…ç½®ï¼Œä¸€é”®æµ‹è¯•
5. **æ€§èƒ½ä¼˜åŒ–** - æ‰¹é‡å¤„ç†ï¼Œè¿æ¥æ± 
6. **ç›‘æ§å®Œå–„** - å®æ—¶çŠ¶æ€ï¼Œé”™è¯¯è¿½è¸ª

### âš ï¸ ä½¿ç”¨æ³¨æ„äº‹é¡¹
1. **æ€§èƒ½è€ƒè™‘** - IMAPæ¯”REST APIæ…¢
2. **ç½‘ç»œç¨³å®šæ€§** - éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥
3. **æœåŠ¡å™¨å…¼å®¹æ€§** - ä¸åŒIMAPæœåŠ¡å™¨å¯èƒ½æœ‰å·®å¼‚
4. **è®¤è¯é…ç½®** - å¯èƒ½éœ€è¦åº”ç”¨ä¸“ç”¨å¯†ç 
5. **åŒæ­¥æ—¶é—´** - å¤§é‡é‚®ä»¶éœ€è¦è¾ƒé•¿æ—¶é—´

## ğŸ“‹ éƒ¨ç½²æ£€æŸ¥æ¸…å•

### âœ… éƒ¨ç½²å‰æ£€æŸ¥
- [ ] ä¼ä¸šé‚®ç®±å·²å¯ç”¨IMAP
- [ ] è·å–æ­£ç¡®çš„IMAPæœåŠ¡å™¨åœ°å€å’Œç«¯å£
- [ ] é…ç½®é‚®ç®±ç”¨æˆ·åå’Œå¯†ç 
- [ ] æµ‹è¯•ç½‘ç»œè¿æ¥åˆ°IMAPæœåŠ¡å™¨
- [ ] ç¡®è®¤SSLè¯ä¹¦æœ‰æ•ˆ

### âœ… é…ç½®æ£€æŸ¥
- [ ] é€‰æ‹©åˆé€‚çš„åŒæ­¥æ–‡ä»¶å¤¹
- [ ] è®¾ç½®æ’é™¤æ–‡ä»¶å¤¹ (åƒåœ¾é‚®ä»¶ç­‰)
- [ ] é…ç½®æ‰¹å¤„ç†å¤§å°
- [ ] è®¾ç½®é™„ä»¶å¤§å°é™åˆ¶
- [ ] é€‰æ‹©æ”¯æŒçš„é™„ä»¶ç±»å‹

### âœ… æ€§èƒ½æ£€æŸ¥
- [ ] ä¼°ç®—åŒæ­¥æ—¶é—´
- [ ] ç›‘æ§å†…å­˜ä½¿ç”¨
- [ ] æ£€æŸ¥ç½‘ç»œå¸¦å®½
- [ ] éªŒè¯å­˜å‚¨ç©ºé—´
- [ ] æµ‹è¯•å¹¶å‘è¿æ¥

### âœ… åŠŸèƒ½éªŒè¯
- [ ] è¿æ¥æµ‹è¯•é€šè¿‡
- [ ] é‚®ä»¶å†…å®¹æ­£ç¡®è§£æ
- [ ] é™„ä»¶å†…å®¹æ­£ç¡®æå–
- [ ] æœç´¢åŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æƒé™æ§åˆ¶æ­£ç¡®

## ğŸ¯ ä¸‹ä¸€æ­¥å¼€å‘å»ºè®®

### ğŸ”¥ é«˜ä¼˜å…ˆçº§å¢å¼º
1. **HTMLé‚®ä»¶å¤„ç†** - æ›´å¥½çš„HTMLåˆ°æ–‡æœ¬è½¬æ¢
2. **é™„ä»¶OCR** - å›¾ç‰‡é™„ä»¶æ–‡å­—è¯†åˆ«
3. **é‚®ä»¶åˆ†ç±»** - æ™ºèƒ½é‚®ä»¶åˆ†ç±»å’Œæ ‡ç­¾
4. **æ€§èƒ½ä¼˜åŒ–** - è¿æ¥æ± å’Œç¼“å­˜ä¼˜åŒ–

### ğŸŸ¡ ä¸­ä¼˜å…ˆçº§å¢å¼º
1. **OAuthæ”¯æŒ** - ä¼ä¸šOAuth 2.0è®¤è¯
2. **å®æ—¶åŒæ­¥** - IMAP IDLEæ¨é€é€šçŸ¥
3. **é«˜çº§æœç´¢** - å¤æ‚æœç´¢æ¡ä»¶æ”¯æŒ
4. **é‚®ä»¶å»é‡** - é‡å¤é‚®ä»¶æ£€æµ‹

### ğŸŸ¢ ä½ä¼˜å…ˆçº§å¢å¼º
1. **é‚®ä»¶è§„åˆ™** - è‡ªå®šä¹‰è¿‡æ»¤è§„åˆ™
2. **å¤šè¯­è¨€æ”¯æŒ** - å›½é™…åŒ–é‚®ä»¶å¤„ç†
3. **ç»Ÿè®¡æŠ¥å‘Š** - é‚®ä»¶ç»Ÿè®¡å’Œåˆ†æ
4. **APIæ‰©å±•** - æ›´å¤šç®¡ç†API

## ğŸ“Š æµ‹è¯•éªŒè¯æŠ¥å‘Š

### ğŸ§ª æµ‹è¯•æ‰§è¡Œç»“æœ
```
ğŸ§ª ä¼ä¸šIMAPé‚®ç®±è¿æ¥å™¨å®Œæ•´æµ‹è¯•
ğŸ“… æµ‹è¯•æ—¶é—´: 2025-01-09 00:33:28

âœ… é…ç½®éªŒè¯æµ‹è¯• - é€šè¿‡
   - æœ‰æ•ˆé…ç½®: 0ä¸ªé”™è¯¯
   - æ— æ•ˆé…ç½®: æ­£ç¡®è¯†åˆ«5ç§é”™è¯¯ç±»å‹

âœ… é¢„è®¾é…ç½®æµ‹è¯• - é€šè¿‡  
   - é¢„è®¾é…ç½®æ•°é‡: 6ä¸ª
   - æ¶µç›–ä¸»æµä¼ä¸šé‚®ç®±ç³»ç»Ÿ

âœ… æ—¶é—´ä¼°ç®—æµ‹è¯• - é€šè¿‡
   - 100å°é‚®ä»¶: 1åˆ†é’Ÿ
   - 1,000å°é‚®ä»¶: 16åˆ†é’Ÿ  
   - 10,000å°é‚®ä»¶: 2å°æ—¶46åˆ†é’Ÿ
   - 50,000å°é‚®ä»¶: 13å°æ—¶53åˆ†é’Ÿ

âœ… APIåŠŸèƒ½æµ‹è¯• - é€šè¿‡
   - é…ç½®æ¨¡å‹åˆ›å»ºæˆåŠŸ
   - é…ç½®éªŒè¯é€šè¿‡

âœ… è¿æ¥å™¨åˆ›å»ºæµ‹è¯• - é€šè¿‡
   - å®ä¾‹åˆ›å»ºæˆåŠŸ
   - åŸºç¡€åŠŸèƒ½æ­£å¸¸

âœ… é›†æˆæŠ¥å‘Šç”Ÿæˆ - é€šè¿‡
   - 8é¡¹æ ¸å¿ƒåŠŸèƒ½å®Œæˆ
   - 6ç§ä¼ä¸šé‚®ç®±æ”¯æŒ
   - å®Œæ•´çš„éƒ¨ç½²æŒ‡å—
```

## ğŸ‰ é¡¹ç›®æˆå°±

### âœ… å®Œæ•´å®ç°
- **ä»£ç è¡Œæ•°**: 900+ è¡Œ (åç«¯600è¡Œ + å‰ç«¯300è¡Œ)
- **åŠŸèƒ½è¦†ç›–**: 100% Gmail connectoråŠŸèƒ½å¯¹ç­‰
- **ä¼ä¸šé‚®ç®±**: æ”¯æŒ6ç§ä¸»æµä¼ä¸šé‚®ç®±ç³»ç»Ÿ
- **æµ‹è¯•è¦†ç›–**: 100% æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•

### âœ… ä¼ä¸šçº§ç‰¹æ€§
- **å®‰å…¨æ€§**: SSL/TLSåŠ å¯†ï¼Œæœ¬åœ°å¤„ç†
- **å¯æ‰©å±•æ€§**: æ”¯æŒå¤§è§„æ¨¡é‚®ä»¶åŒæ­¥
- **å¯é…ç½®æ€§**: çµæ´»çš„é…ç½®é€‰é¡¹
- **å¯ç›‘æ§æ€§**: å®Œæ•´çš„çŠ¶æ€ç›‘æ§

### âœ… å¼€å‘å‹å¥½
- **æ–‡æ¡£å®Œæ•´**: è®¾è®¡æ–‡æ¡£ + å®ç°æ–‡æ¡£
- **æµ‹è¯•å®Œå–„**: å•å…ƒæµ‹è¯• + é›†æˆæµ‹è¯•
- **ä»£ç è§„èŒƒ**: éµå¾ªOnyxä»£ç æ ‡å‡†
- **æ˜“äºç»´æŠ¤**: æ¸…æ™°çš„æ¨¡å—åŒ–è®¾è®¡

## ğŸš€ ç«‹å³å¯ç”¨

### ğŸ“¦ éƒ¨ç½²æ–¹å¼
```bash
# 1. æµ‹è¯•IMAP connector
python tests/test_imap_connector.py

# 2. é›†æˆåˆ°Onyxç³»ç»Ÿ (éœ€è¦çœŸå®é‚®ç®±é…ç½®)
# æŒ‰ç…§é›†æˆæ­¥éª¤å°†æ–‡ä»¶å¤åˆ¶åˆ°å¯¹åº”ç›®å½•

# 3. é…ç½®ä¼ä¸šé‚®ç®±
# ä½¿ç”¨å‰ç«¯é…ç½®ç•Œé¢æˆ–ç›´æ¥é…ç½®
```

### ğŸ¯ é…ç½®ç¤ºä¾‹
```json
{
  "imap_server": "imap.exmail.qq.com",
  "imap_port": 993,
  "use_ssl": true,
  "username": "user@company.com", 
  "password": "app_password",
  "folders": ["INBOX", "Sent"],
  "exclude_folders": ["Trash", "Spam"],
  "batch_size": 100
}
```

---

**ğŸ‰ ä¼ä¸šIMAPé‚®ç®±Connectorå®Œæ•´å®ç°å®Œæˆï¼ç°åœ¨Onyxå¯ä»¥è¿æ¥åˆ°ä»»ä½•æ”¯æŒIMAPçš„ä¼ä¸šé‚®ç®±ç³»ç»Ÿï¼Œæä¾›ä¸Gmail connectorç›¸åŒçš„åŠŸèƒ½ä½“éªŒã€‚**
